<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Classified Access Terminal</title>
<style>
body { font-family: 'Courier New', monospace; background: #000; color: #0f0; text-align: center; padding: 50px; }
input, button { padding: 10px; margin: 5px; background: #111; color: #0f0; border: 1px solid #0f0; }
button:hover { background: #0f0; color: #000; cursor: pointer; }
.hidden { display: none; }
#infoList p { border-bottom: 1px solid #0f0; padding: 5px; }
</style>
</head>
<body>
<h1>ACCESS TERMINAL</h1>

<div id="loginDiv">
  <input type="text" id="accessCode" placeholder="ACCESS CODE"><br>
  <input type="text" id="infoCode" placeholder="DATA KEY"><br>
  <button onclick="verifyAccess()">ENTER</button>
  <p id="loginMsg"></p>
</div>

<div id="dataDiv" class="hidden">
  <h2>CLASSIFIED DATABASE</h2>
  <div id="infoList"></div>

  <h3>ADD NEW ENTRY</h3>
  <input type="text" id="newInfo" placeholder="CLASSIFIED DATA"><br>
  <input type="text" id="adminKey" placeholder="ADMIN KEY"><br>
  <button onclick="addInfo()">ADD ENTRY</button>
  <p id="addMsg"></p>

  <h3>REMOVE ENTRY</h3>
  <input type="text" id="removeKey" placeholder="KEY TO REMOVE"><br>
  <input type="text" id="removeAdminKey" placeholder="ADMIN KEY"><br>
  <button onclick="removeInfo()">REMOVE ENTRY</button>
  <p id="removeMsg"></p>
</div>

<script>
const coreAdminKey = "ADM1N-R3D4CT";
const githubUser = "YOUR_GITHUB_USERNAME"; // REDACTED
const repoName = "classified-database"; // REDACTED
const filePath = "database.json"; // REDACTED
const githubToken = "YOUR_PERSONAL_ACCESS_TOKEN"; // REDACTED

let database = [];

async function loadDatabase() {
  const res = await fetch(`https://raw.githubusercontent.com/${githubUser}/${repoName}/main/${filePath}`);
  database = await res.json();
}

function generateKey() {
  return Math.random().toString(36).substring(2,10).toUpperCase();
}

async function verifyAccess() {
  await loadDatabase();
  const accessCode = document.getElementById("accessCode").value;
  const infoCode = document.getElementById("infoCode").value;
  let found = database.find(entry => entry.key === infoCode);
  if(accessCode === "R3D4CT3D-92XQ" && found){
    document.getElementById("loginDiv").classList.add("hidden");
    document.getElementById("dataDiv").classList.remove("hidden");
    displayInfo();
  } else {
    document.getElementById("loginMsg").innerText = "ACCESS DENIED";
  }
}

function displayInfo() {
  const infoList = document.getElementById("infoList");
  infoList.innerHTML = "";
  database.forEach(entry => {
    infoList.innerHTML += `<p>DATA KEY: ${entry.key} | DATA: ${entry.info}</p>`;
  });
}

async function addInfo() {
  const newInfo = document.getElementById("newInfo").value;
  const adminKey = document.getElementById("adminKey").value;
  if(adminKey !== coreAdminKey) {
    document.getElementById("addMsg").innerText = "INVALID ADMIN KEY";
    return;
  }

  const newKey = generateKey();
  database.push({info: newInfo, key: newKey});

  const res = await fetch(`https://api.github.com/repos/${githubUser}/${repoName}/contents/${filePath}`);
  const data = await res.json();
  const sha = data.sha;

  await fetch(`https://api.github.com/repos/${githubUser}/${repoName}/contents/${filePath}`, {
    method: 'PUT',
    headers: { "Authorization": `token ${githubToken}`, "Content-Type": "application/json" },
    body: JSON.stringify({
      message: `Add new data key ${newKey}`,
      content: btoa(JSON.stringify(database, null, 2)),
      sha: sha
    })
  });

  document.getElementById("addMsg").innerText = `ENTRY ADDED | KEY: ${newKey}`;
  displayInfo();
  document.getElementById("newInfo").value = "";
  document.getElementById("adminKey").value = "";
}

async function removeInfo() {
  const keyToRemove = document.getElementById("removeKey").value;
  const adminKey = document.getElementById("removeAdminKey").value;

  if (adminKey !== coreAdminKey) {
    document.getElementById("removeMsg").innerText = "INVALID ADMIN KEY";
    return;
  }

  const index = database.findIndex(entry => entry.key === keyToRemove);
  if (index === -1) {
    document.getElementById("removeMsg").innerText = "KEY NOT FOUND";
    return;
  }

  database.splice(index, 1);

  const res = await fetch(`https://api.github.com/repos/${githubUser}/${repoName}/contents/${filePath}`);
  const data = await res.json();
  const sha = data.sha;

  await fetch(`https://api.github.com/repos/${githubUser}/${repoName}/contents/${filePath}`, {
    method: 'PUT',
    headers: { "Authorization": `token ${githubToken}`, "Content-Type": "application/json" },
    body: JSON.stringify({
      message: `Remove data key ${keyToRemove}`,
      content: btoa(JSON.stringify(database, null, 2)),
      sha: sha
    })
  });

  document.getElementById("removeMsg").innerText = `ENTRY REMOVED | KEY: ${keyToRemove}`;
  displayInfo();
  document.getElementById("removeKey").value = "";
  document.getElementById("removeAdminKey").value = "";
}

loadDatabase();
</script>
</body>
</html>
